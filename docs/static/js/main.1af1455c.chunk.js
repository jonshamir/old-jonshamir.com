(this["webpackJsonpjonshamir.com"]=this["webpackJsonpjonshamir.com"]||[]).push([[0],{55:function(e,t,s){},56:function(e,t,s){},58:function(e,t,s){},63:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},68:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},87:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var i=s(1),n=s.n(i),r=s(41),o=s.n(r),c=(s(55),s(104)),a=s(5),l=s(42),h=s(18),d=(s(56),s(0));class u extends n.a.Component{constructor(e){super(e),this.state={}}render(){const{isVisible:e}=this.props;return Object(d.jsx)("div",{className:e?"logo-container visible":"logo-container",children:Object(d.jsx)("div",{className:e?"rotate":"",children:Object(d.jsxs)("div",{className:"logo",children:[Object(d.jsxs)("div",{className:"top",children:[Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"})]}),Object(d.jsxs)("div",{className:"bottom",children:[Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"})]}),Object(d.jsxs)("div",{className:"middle",children:[Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"})]}),Object(d.jsxs)("div",{className:"side",children:[Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"}),Object(d.jsx)("div",{className:"face"})]})]})})})}}u.defaultProps={onClick:()=>{}};var p=u;s(58);class v extends n.a.Component{constructor(e){super(e),this.updateInlinePos=()=>{if(this.inlineLogoEl=document.getElementById("logoInlinePos"),this.inlineLogoEl){const e=this.inlineLogoEl.getBoundingClientRect().x,t=this.inlineLogoEl.offsetTop;this.setState({inlinePos:[e-30,t-180]})}},this.getInlinePos=()=>{const{inlinePos:e}=this.state;if(0!==e[0]&&0!==e[1])return{x:e[0],y:e[1]};this.inlineLogoEl=document.getElementById("logoInlinePos");let t=0,s=0;return this.inlineLogoEl&&(t=this.inlineLogoEl.offsetLeft-30,s=this.inlineLogoEl.offsetTop-180),{x:t,y:s}},this.handleScroll=()=>{const e=document.body.scrollTop||document.documentElement.scrollTop,{isMinimized:t}=this.state;e<10?this.setState({isMinimized:!1}):t||this.setState({isMinimized:!0})},this.state={isLoaded:!1,isMinimized:!1,inlinePos:[0,0],isHomepage:"/"===e.history.location.pathname},this.inlineLogoEl=null}componentDidMount(){window.addEventListener("resize",(()=>this.updateInlinePos())),window.addEventListener("scroll",this.handleScroll),this.updateInlinePos(),setTimeout((()=>{this.setState({isLoaded:!0})}),500),this.props.history.listen(((e,t)=>{this.setState({isHomepage:!1}),"/"===e.pathname&&setTimeout((()=>{this.setState({isHomepage:!0})}),300)}))}onClick(e){"/"===this.props.history.location.pathname&&e.preventDefault()}render(){const{isMinimized:e,isHomepage:t}=this.state,{x:s,y:i}=this.getInlinePos(),n={transform:!t||this.inlineLogoEl&&e?"scale(0.5)":"scale(1) translate(".concat(s,"px,").concat(i,"px)")};return Object(d.jsx)(h.b,{onClick:this.onClick.bind(this),to:"/",className:"FloatingLogo",style:n,children:Object(d.jsx)(p,{isVisible:this.state.isLoaded})})}}var m=Object(a.g)(v),j=s(46),b=s(44);const f=Object(b.a)("colorTheme");function x(){const e=Object(j.useMediaQuery)({query:"(prefers-color-scheme: dark)"},void 0),[t,s]=f(),n=Object(i.useMemo)((()=>void 0===t?!!e:t),[t,e]);return Object(i.useEffect)((()=>{const e=document.querySelector('link[rel="icon"]');n?(document.body.classList.add("dark"),e.href="/favicon-dark.png"):(document.body.classList.remove("dark"),e.href="/favicon-light.png")}),[n]),{isDark:n,setIsDark:s}}s(63);const g=()=>{const{isDark:e,setIsDark:t}=x();return Object(d.jsx)("label",{htmlFor:"DarkModeToggle",className:"DarkModeToggle",children:Object(d.jsx)("input",{id:"DarkModeToggle",type:"checkbox",checked:e,onChange:e=>{let{target:s}=e;return t(s.checked)},"aria-label":"Dark mode toggle"})})};s(64);var y=()=>{const{isDark:e}=x();return Object(d.jsxs)("div",{className:"SocialLinks",children:[Object(d.jsxs)("span",{className:"item",children:[Object(d.jsxs)("span",{children:[e?"Light":"Dark"," Mode"]}),Object(d.jsx)(g,{})]}),Object(d.jsxs)("a",{className:"item",href:"https://www.instagram.com/yonshamir/",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("span",{children:"Instagram"}),Object(d.jsx)("img",{src:"./assets/ui/instagram.svg",alt:""})]},"instagram"),Object(d.jsxs)("a",{className:"item",href:"https://github.com/jonshamir",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("span",{children:"GitHub"}),Object(d.jsx)("img",{src:"./assets/ui/github.svg",alt:""})]},"github"),Object(d.jsxs)("a",{className:"item",href:"https://www.twitter.com/jonshamir/",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("span",{children:"Twitter"}),Object(d.jsx)("img",{src:"./assets/ui/twitterx.svg",alt:""})]},"twitter"),Object(d.jsxs)("a",{className:"item",href:"https://www.linkedin.com/in/jonshamir/",target:"_blank",rel:"noreferrer",children:[Object(d.jsx)("span",{children:"LinkedIn"}),Object(d.jsx)("img",{src:"./assets/ui/linkedin.svg",alt:""})]},"linkedin")]})},O=s(103);class w extends n.a.Component{componentDidMount(){window.scrollTo(0,0)}render(){return null}}var S=w;s(65);var _=e=>Object(d.jsxs)(O.a.div,{className:"ProjectPage Page",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[Object(d.jsx)(S,{}),e.children]});s(66);var k=e=>Object(d.jsx)("button",{className:"Button",children:e.children}),N=s(47);s(67),s(68);var C=e=>{let{alt:t,ratio:s=1,style:n={},className:r="",...o}=e;const[c,a]=Object(i.useState)(!1);return Object(d.jsx)(N.AspectRatio,{className:"imageWrapper "+r,ratio:s,style:n,children:Object(d.jsx)("img",{...o,onLoad:e=>{a(!0)},className:c?"image loaded":"image",alt:t})})};var D=e=>Object(d.jsxs)(_,{children:[Object(d.jsx)(C,{ratio:"2",src:"assets/projects/muser/screenshot.png",alt:"Muser Screenshot",className:"Screenshot",style:{backgroundColor:"#455d63"}}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("a",{href:"https://jonshamir.github.io/muser",target:"_blank",rel:"noreferrer",children:Object(d.jsx)(k,{children:Object(d.jsx)("span",{children:"Launch Project \u2192"})})}),Object(d.jsx)("h1",{children:"Muser"}),Object(d.jsx)("p",{className:"subtitle",children:"Smart music visualizer"}),Object(d.jsx)("p",{children:"Muser is an experiment to see how machine learning technology can be used to enhance music visualization. The idea originated while writing a seminar paper on the history of music visualization. I researched, designed and implemented the project from start to finish."}),Object(d.jsxs)("p",{children:["A pre-trained neural network called"," ",Object(d.jsx)("a",{href:"https://github.com/jordipons/musicnn",target:"_blank",rel:"noreferrer",children:"musicnn"})," ","predicts the musical genre for each second of a song. The predictions are then used to generate a color scheme. The final visualization color palette is based on the 5 most-fitting genres."]}),Object(d.jsx)("p",{children:"We can use this to visualize how the style of a song changes over time:"}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"muserTimeline"}),Object(d.jsx)("strong",{children:"Love the Way You Lie"})," / Eminem feat. Rihanna"]}),Object(d.jsx)("p",{children:"For example, we can see that this classic song by Eminem and Rihanna starts with an acoustic intro (bluish) then alternates between rap (red) and pop (yellow) segments."}),Object(d.jsx)("p",{children:"For more information visit the project website!"}),Object(d.jsx)("br",{}),Object(d.jsxs)("figure",{children:[Object(d.jsx)(C,{src:"assets/projects/muser/kandinsky.jpg",alt:"kandinsky"}),Object(d.jsxs)("span",{className:"Caption",children:[Object(d.jsx)("span",{children:"Circles in a Circle "}),"by Wassily Kandinsky, 1923"]})]}),Object(d.jsxs)("p",{children:["Colors for each genre were chosen according to the"," ",Object(d.jsx)("a",{href:"https://musicmap.info/",target:"_blank",rel:"noreferrer",children:"Musicmap"})," ","project so that music genres which are stylistically closer will get similar colors."]}),Object(d.jsx)("p",{children:"Muser is inspired by Wassily Kandinsky (1866-1944). Generally credited as the pioneer of abstract art, his work is well-known for its musical influences. Kandinsky associated specific tones and instruments to shapes and colors, thus \u201cvisualizing\u201d a musical composition."}),Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Tools Used"}),Object(d.jsxs)("ul",{className:"List",children:[Object(d.jsx)("li",{children:"JavaScript (React.js)"}),Object(d.jsx)("li",{children:"WebGL (THREE.js + GLSL)"}),Object(d.jsx)("li",{children:"Python"})]})]}),Object(d.jsx)("img",{src:"assets/projects/muser/circles.png",alt:"",className:"muserCircles"})]});var L=e=>Object(d.jsxs)(_,{children:[Object(d.jsx)(C,{ratio:"1.95",src:"assets/projects/herbtree/screenshot.png",alt:"Herb Tree screenshot",className:"Screenshot",style:{backgroundColor:"#f6f2f1"}}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("a",{href:"http://herbtree.co.il",target:"_blank",rel:"noreferrer",children:Object(d.jsx)(k,{children:Object(d.jsx)("span",{children:"Launch Project \u2192"})})}),Object(d.jsx)("h1",{children:"Herb Tree"}),Object(d.jsx)("p",{className:"subtitle",children:"Interactive botanic visualization"}),Object(d.jsx)("p",{children:"An online index of culinary herbs, created as the final project for my Visual Communication degree. The plants are organized according to their scientific classification, creating a herbal \u201ctree of life\u201d. Each herb contains a description as well as information about using it in the kitchen. In addition to research, design and development, I photographed dozens of plant specimens from the Hebrew University Herbarium, which are incorporated into the project."}),Object(d.jsx)("p",{children:"Note that the site is currently available only in Hebrew."}),Object(d.jsxs)("figure",{children:[Object(d.jsx)(C,{src:"assets/projects/herbtree/specimen.jpg",alt:"Photographing a Specimen"}),Object(d.jsx)("span",{className:"Caption",children:"Photographing a specimen for the project."})]}),Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Tools Used"}),Object(d.jsxs)("ul",{className:"List",children:[Object(d.jsx)("li",{children:"JavaScript (d3.js + React.js)"}),Object(d.jsx)("li",{children:"Python"}),Object(d.jsx)("li",{children:"Photography"})]})]})]}),z=s(29),I=s.n(z),T=s(48);s(78);var P=e=>{const t=(s=9,Array.from({length:s},((e,t)=>t+1))).map((e=>Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:"assets/projects/unitycg/slide".concat(e,".png"),alt:"Slide"})},e)));var s;return Object(d.jsx)(_,{children:Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("div",{className:"earth3d",children:Object(d.jsx)(I.a,{url:"assets/projects/unitycg/cube.mp4",config:{file:{attributes:{poster:"assets/projects/unitycg/cube.jpg",disableRemotePlayback:!0}}},playing:!0,loop:!0,width:"100%",attributes:{disableRemotePlayback:!0}})}),Object(d.jsx)("h1",{children:"Unity CG"}),Object(d.jsx)("p",{className:"subtitle",children:"Teaching Computer Graphics in Unity"}),Object(d.jsxs)("p",{children:["In 2019 I was given the opportunity to rebuild the practical side of the Computer Graphics Course at"," ",Object(d.jsx)("a",{href:"https://en.huji.ac.il/",target:"_blank",rel:"noreferrer",children:"the Hebrew University"})," ","from the ground up. The goal was to teach Computer Graphics in a more engaging way, using the real-time interactivity of the"," ",Object(d.jsx)("a",{href:"https://unity.com/",target:"_blank",rel:"noreferrer",children:"Unity game engine"}),"."]}),Object(d.jsx)("p",{children:"Due to the emerging COVID-19 pandemic, the class had to be taught remotely. In an attempt to improve the learning experience for the students, I created 12 lectures with over 500 slides including custom illustrations & animations that visualize different concepts."}),Object(d.jsxs)("div",{className:"slideContainer",children:[Object(d.jsx)(T.Carousel,{showThumbs:!1,showStatus:!1,showIndicators:!1,emulateTouch:!0,infiniteLoop:!0,autoPlay:!0,renderArrowPrev:e=>Object(d.jsx)("div",{onClick:e,className:"CarouselArrow left",children:"<"}),renderArrowNext:e=>Object(d.jsx)("div",{onClick:e,className:"CarouselArrow right",children:">"}),children:t}),Object(d.jsx)("span",{className:"Caption",children:"Some of the slides I created for the course"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"I also created 5 coding exercises involving subjects such as Subdivision Surfaces, Ray-Tracing, Shading, Texturing and more. I taught the students remotely and graded their assignments."}),Object(d.jsx)("div",{className:"earth3d torus",children:Object(d.jsx)(I.a,{url:"assets/projects/unitycg/torus.mp4",config:{file:{attributes:{poster:"assets/projects/unitycg/torus.jpg",disableRemotePlayback:!0}}},playing:!0,loop:!0,width:"100%"})}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Tools Used"}),Object(d.jsxs)("ul",{className:"List",children:[Object(d.jsx)("li",{children:"Unity3D + C#"}),Object(d.jsx)("li",{children:"HLSL (shading language)"}),Object(d.jsx)("li",{children:"Adobe CC"}),Object(d.jsx)("li",{children:"Google Slides"})]})]})})};s(84);var M=e=>Object(d.jsx)("div",{className:"VideoEmbed",children:Object(d.jsx)("iframe",{width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(e.videoId,"?"),title:"YouTube video player",frameBorder:"0",allow:"modestbranding; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})});var F=e=>{let{href:t,children:s,...i}=e;return Object(d.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:s})};var E=[{slug:"herbtree",name:"Herb Tree",subtitle:"2023 | Interactive botanic visualization",component:L,color:"#e7e1e1"},{slug:"muser",name:"Muser",subtitle:"2021 | Smart music visualizer",component:D,color:"#648887"},{slug:"unitycg",name:"Unity CG",subtitle:"2020-2023 | Computer graphics course in Unity",component:P,color:"#8595a8"},{slug:"scopus",name:"Scopus",subtitle:"2019 | Short 3D animation",component:e=>Object(d.jsx)(_,{children:Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h1",{children:"Scopus"}),Object(d.jsx)("p",{className:"subtitle",children:"Short 3D animation"}),Object(d.jsx)("p",{children:"Mount Scopus and its brutalist architecture can be seen from practically anywhere in Jerusalem - clashing with the city's ancient architecture. I decided it might be used as a spaceship..."}),Object(d.jsx)("p",{children:"Modeled & rendered using Cinema4D."}),Object(d.jsx)("br",{}),Object(d.jsx)(M,{videoId:"7KkArk0uCDQ"}),Object(d.jsx)("p",{children:Object(d.jsx)("br",{})})]})}),color:"#a1a1a1"},{slug:"leaf-map",name:"Leaf Map",subtitle:"2018 | Interactive map of leaf shapes",component:e=>Object(d.jsxs)(_,{children:[Object(d.jsx)(C,{ratio:"1.95",src:"assets/projects/leaf-map/screenshot.png",alt:"Leaf Map screenshot",className:"Screenshot",style:{backgroundColor:"#f7f3ee"}}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("a",{href:"https://jonshamir.github.io/leaf-map",target:"_blank",rel:"noreferrer",children:Object(d.jsx)(k,{children:Object(d.jsx)("span",{children:"Launch Project \u2192"})})}),Object(d.jsx)("h1",{children:"Leaf Map"}),Object(d.jsx)("p",{className:"subtitle",children:"Interactive map of leaf shapes"}),Object(d.jsx)("p",{children:"I used machine learning techniques to organize tree species according to their leaf shape. The idea was to create a more intuitive and friendly way to recognize plant species."}),Object(d.jsx)("img",{src:"assets/projects/leaf-map/features.png",alt:"Leaf Features"}),Object(d.jsxs)("p",{children:["Using the"," ",Object(d.jsx)(F,{href:"https://en.wikipedia.org/wiki/Shape_context",children:"Shape Context Algorithm"})," ",'I generated a "fingerprint" vector representing each leaf, which is then used to asses the similarity of shapes. Finally the dimension of this vector is reduced to 2D using PCA and'," ",Object(d.jsx)(F,{href:"https://en.wikipedia.org/wiki/T-distributed_stochastic_neighbor_embedding",children:"t-SNE"}),", and the leaves are displayed in an interactive interface I created using D3.js."]}),Object(d.jsxs)("p",{children:["The project was inspired by this"," ",Object(d.jsx)(F,{href:"http://fontmap.ideo.com/",children:"Font Map"}),", all data and images were taken from the"," ",Object(d.jsx)(F,{href:"http://leafsnap.com/dataset/",children:"Leaf Snap dataset"}),"."]}),Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Tools Used"}),Object(d.jsxs)("ul",{className:"List",children:[Object(d.jsx)("li",{children:"JavaScript (interface)"}),Object(d.jsx)("li",{children:"Python (data proccessing)"})]})]})]}),color:"#f8f3ef"}];s(85);var R=e=>Object(d.jsx)("div",{className:"IntroSection section",children:Object(d.jsxs)("div",{className:"intro",children:[Object(d.jsx)("span",{id:"logoInlinePos"}),Object(d.jsx)("h1",{children:"Hi, I'm Jon Shamir"}),Object(d.jsx)("p",{children:"I'm a designer & developer. My interests include computer graphics, data visualization, web technologies and machine learning."}),Object(d.jsx)("p",{children:"Currently building spatial interactions at Sightful."})]})});s(86);var G=e=>Object(d.jsxs)("div",{className:"ProjectSection section",children:[Object(d.jsx)("h2",{children:"Projects"}),Object(d.jsx)("div",{className:"projectTiles",children:E.map((e=>Object(d.jsxs)(h.b,{to:"/projects/".concat(e.slug),className:"ProjectTile",children:[Object(d.jsx)(C,{src:"assets/projects/".concat(e.slug,"/cover.jpg"),alt:e.name,style:{backgroundColor:e.color}}),Object(d.jsxs)("div",{className:"info",children:[Object(d.jsx)("h3",{children:e.name}),Object(d.jsx)("span",{children:e.subtitle})]})]},e.slug)))})]}),B=s(3);var U=new class{constructor(){this.width=null,this.height=null,this.aspect=this.width/this.height,this.isMobile=!1,this.breakpoint=768,this.fboWidth=null,this.fboHeight=null,this.resizeFunc=this.resize.bind(this),this.time=0,this.delta=0}init(){this.pixelRatio=window.devicePixelRatio,this.resize(),this.renderer=new B.n({alpha:!0}),this.renderer.autoClear=!1,this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(this.pixelRatio),this.clock=new B.e,this.clock.start()}resize(){this.width=window.innerWidth,this.height=.8*window.innerHeight,this.aspect=this.width/this.height,this.renderer&&this.renderer.setSize(this.width,this.height)}update(){this.delta=this.clock.getDelta(),this.time+=this.delta}};var A=new class{constructor(){this.mouseMoved=!1,this.coords=new B.m,this.coords_old=new B.m,this.diff=new B.m,this.timer=null,this.count=0}init(){document.body.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1),document.body.addEventListener("touchstart",this.onDocumentTouchStart.bind(this),!1),document.body.addEventListener("touchmove",this.onDocumentTouchMove.bind(this),!1)}setCoords(e,t){this.timer&&clearTimeout(this.timer),this.coords.set(e/U.width*2-1,-t/U.height*2+1),this.mouseMoved=!0,this.timer=setTimeout((()=>{this.mouseMoved=!1}),100)}onDocumentMouseMove(e){this.setCoords(e.pageX,e.pageY)}onDocumentTouchStart(e){1===e.touches.length&&this.setCoords(e.touches[0].pageX,e.touches[0].pageY)}onDocumentTouchMove(e){1===e.touches.length&&this.setCoords(e.touches[0].pageX,e.touches[0].pageY)}update(){this.diff.subVectors(this.coords,this.coords_old),this.coords_old.copy(this.coords),0===this.coords_old.x&&0===this.coords_old.y&&this.diff.set(0,0)}};s(49);var Y="attribute vec3 position;\nuniform vec2 px;\nuniform vec2 boundarySpace;\nvarying vec2 uv;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    vec2 scale = 1.0 - boundarySpace * 2.0;\n    pos.xy = pos.xy * scale;\n    uv = vec2(0.5)+(pos.xy)*0.5;\n    gl_Position = vec4(pos, 1.0);\n}\n",H="precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\nuniform float dt;\nuniform bool isBFECC;\n// uniform float uvScale;\nuniform vec2 fboSize;\nuniform vec2 px;\nvarying vec2 uv;\n\nvoid main(){\n    vec2 ratio = max(fboSize.x, fboSize.y) / fboSize;\n\n    if(isBFECC == false){\n        vec2 vel = texture2D(velocity, uv).xy;\n        vec2 uv2 = uv - vel * dt * ratio;\n        vec2 newVel = texture2D(velocity, uv2).xy;\n        gl_FragColor = vec4(newVel, 0.0, 0.0);\n    } else {\n        vec2 spot_new = uv;\n        vec2 vel_old = texture2D(velocity, uv).xy;\n        // back trace\n        vec2 spot_old = spot_new - vel_old * dt * ratio;\n        vec2 vel_new1 = texture2D(velocity, spot_old).xy;\n\n        // forward trace\n        vec2 spot_new2 = spot_old + vel_new1 * dt * ratio;\n        \n        vec2 error = spot_new2 - spot_new;\n\n        vec2 spot_new3 = spot_new - error / 2.0;\n        vec2 vel_2 = texture2D(velocity, spot_new3).xy;\n\n        // back trace 2\n        vec2 spot_old2 = spot_new3 - vel_2 * dt * ratio;\n        // gl_FragColor = vec4(spot_old2, 0.0, 0.0);\n        vec2 newVel2 = texture2D(velocity, spot_old2).xy; \n        gl_FragColor = vec4(newVel2, 0.0, 0.0);\n    }\n}\n";class V{constructor(e){var t;this.props=e,this.uniforms=null===(t=this.props.material)||void 0===t?void 0:t.uniforms}init(){this.scene=new B.l,this.camera=new B.d,this.uniforms&&(this.material=new B.k(this.props.material),this.geometry=new B.j(2,2),this.plane=new B.i(this.geometry,this.material),this.scene.add(this.plane))}update(){U.renderer.setRenderTarget(this.props.output),U.renderer.render(this.scene,this.camera),U.renderer.setRenderTarget(null)}}class W extends V{constructor(e){super({material:{vertexShader:Y,fragmentShader:H,uniforms:{boundarySpace:{value:e.cellScale},px:{value:e.cellScale},fboSize:{value:e.fboSize},velocity:{value:e.src.texture},dt:{value:e.dt},isBFECC:{value:!0}}},output:e.dst}),this.init()}init(){super.init(),this.createBoundary()}createBoundary(){const e=new B.c,t=new Float32Array([-1,-1,0,-1,1,0,-1,1,0,1,1,0,1,1,0,1,-1,0,1,-1,0,-1,-1,0]);e.setAttribute("position",new B.b(t,3));const s=new B.k({vertexShader:"attribute vec3 position;\nvarying vec2 uv;\nuniform vec2 px;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvoid main(){\n    vec3 pos = position;\n    uv = 0.5 + pos.xy * 0.5;\n    vec2 n = sign(pos.xy);\n    pos.xy = abs(pos.xy) - px * 1.0;\n    pos.xy *= n;\n    gl_Position = vec4(pos, 1.0);\n}",fragmentShader:H,uniforms:this.uniforms});this.line=new B.h(e,s),this.scene.add(this.line)}update(e){let{dt:t,isBounce:s,BFECC:i}=e;this.uniforms.dt.value=t,this.line.visible=s,this.uniforms.isBFECC.value=i,super.update()}}class q extends V{constructor(e){super({output:e.dst}),this.init(e)}init(e){super.init();const t=new B.j(1,1),s=new B.k({vertexShader:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec2 uv;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 px;\nvarying vec2 vUv;\n\nvoid main(){\n    vec2 pos = position.xy * scale * 2.0 * px + center;\n    vUv = uv;\n    gl_Position = vec4(pos, 0.0, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n\nuniform vec2 force;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 px;\nvarying vec2 vUv;\n\nvoid main(){\n    vec2 circle = (vUv - 0.5) * 2.0;\n    float d = 1.0-min(length(circle), 1.0);\n    d *= d;\n    gl_FragColor = vec4(force * d, 0, 1);\n}\n",blending:B.a,uniforms:{px:{value:e.cellScale},force:{value:new B.m(0,0)},center:{value:new B.m(0,0)},scale:{value:new B.m(e.cursor_size,e.cursor_size)}}});this.mouse=new B.i(t,s),this.scene.add(this.mouse)}update(e){const t=A.diff.x/2*e.mouse_force,s=A.diff.y/2*e.mouse_force,i=(e.cursor_size,e.cellScale.x,e.cursor_size,e.cellScale.y,A.coords.x),n=A.coords.y,r=this.mouse.material.uniforms;r.force.value.set(t,s),r.center.value.set(i,n),r.scale.value.set(e.cursor_size,e.cursor_size),super.update()}}class J extends V{constructor(e){super({material:{vertexShader:Y,fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\nuniform sampler2D velocity_new;\nuniform float v;\nuniform vec2 px;\nuniform float dt;\n\nvarying vec2 uv;\n\nvoid main(){\n    // poisson equation\n    vec2 old = texture2D(velocity, uv).xy;\n    vec2 new0 = texture2D(velocity_new, uv + vec2(px.x * 2.0, 0)).xy;\n    vec2 new1 = texture2D(velocity_new, uv - vec2(px.x * 2.0, 0)).xy;\n    vec2 new2 = texture2D(velocity_new, uv + vec2(0, px.y * 2.0)).xy;\n    vec2 new3 = texture2D(velocity_new, uv - vec2(0, px.y * 2.0)).xy;\n\n    vec2 new = 4.0 * old + v * dt * (new0 + new1 + new2 + new3);\n    new /= 4.0 * (1.0 + v * dt);\n    \n    gl_FragColor = vec4(new, 0.0, 0.0);\n}\n",uniforms:{boundarySpace:{value:e.boundarySpace},velocity:{value:e.src.texture},velocity_new:{value:e.dst_.texture},v:{value:e.viscous},px:{value:e.cellScale},dt:{value:e.dt}}},output:e.dst,output0:e.dst_,output1:e.dst}),this.init()}update(e){let t,s,{viscous:i,iterations:n,dt:r}=e;this.uniforms.v.value=i;for(var o=0;o<n;o++)o%2===0?(t=this.props.output0,s=this.props.output1):(t=this.props.output1,s=this.props.output0),this.uniforms.velocity_new.value=t.texture,this.props.output=s,this.uniforms.dt.value=r,super.update();return s}}class K extends V{constructor(e){super({material:{vertexShader:Y,fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\nuniform float dt;\nuniform vec2 px;\nvarying vec2 uv;\n\nvoid main(){\n    float x0 = texture2D(velocity, uv-vec2(px.x, 0)).x;\n    float x1 = texture2D(velocity, uv+vec2(px.x, 0)).x;\n    float y0 = texture2D(velocity, uv-vec2(0, px.y)).y;\n    float y1 = texture2D(velocity, uv+vec2(0, px.y)).y;\n    float divergence = (x1-x0 + y1-y0) / 2.0;\n\n    gl_FragColor = vec4(divergence / dt);\n}\n",uniforms:{boundarySpace:{value:e.boundarySpace},velocity:{value:e.src.texture},px:{value:e.cellScale},dt:{value:e.dt}}},output:e.dst}),this.init()}update(e){let{vel:t}=e;this.uniforms.velocity.value=t.texture,super.update()}}class X extends V{constructor(e){super({material:{vertexShader:Y,fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D pressure;\nuniform sampler2D divergence;\nuniform vec2 px;\nvarying vec2 uv;\n\nvoid main(){    \n    // poisson equation\n    float p0 = texture2D(pressure, uv+vec2(px.x * 2.0,  0)).r;\n    float p1 = texture2D(pressure, uv-vec2(px.x * 2.0, 0)).r;\n    float p2 = texture2D(pressure, uv+vec2(0, px.y * 2.0 )).r;\n    float p3 = texture2D(pressure, uv-vec2(0, px.y * 2.0 )).r;\n    float div = texture2D(divergence, uv).r;\n    \n    float newP = (p0 + p1 + p2 + p3) / 4.0 - div;\n    gl_FragColor = vec4(newP);\n}\n",uniforms:{boundarySpace:{value:e.boundarySpace},pressure:{value:e.dst_.texture},divergence:{value:e.src.texture},px:{value:e.cellScale}}},output:e.dst,output0:e.dst_,output1:e.dst}),this.init()}update(e){let t,s,{iterations:i}=e;for(var n=0;n<i;n++)n%2==0?(t=this.props.output0,s=this.props.output1):(t=this.props.output1,s=this.props.output0),this.uniforms.pressure.value=t.texture,this.props.output=s,super.update();return s}}class Q extends V{constructor(e){super({material:{vertexShader:Y,fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D pressure;\nuniform sampler2D velocity;\nuniform vec2 px;\nuniform float dt;\nvarying vec2 uv;\n\nvoid main(){\n    float step = 1.0;\n\n    float p0 = texture2D(pressure, uv+vec2(px.x * step, 0)).r;\n    float p1 = texture2D(pressure, uv-vec2(px.x * step, 0)).r;\n    float p2 = texture2D(pressure, uv+vec2(0, px.y * step)).r;\n    float p3 = texture2D(pressure, uv-vec2(0, px.y * step)).r;\n\n    vec2 v = texture2D(velocity, uv).xy;\n    vec2 gradP = vec2(p0 - p1, p2 - p3) * 0.5;\n    v = v - gradP * dt;\n    gl_FragColor = vec4(v, 0.0, 1.0);\n}\n",uniforms:{boundarySpace:{value:e.boundarySpace},pressure:{value:e.src_p.texture},velocity:{value:e.src_v.texture},px:{value:e.cellScale},dt:{value:e.dt}}},output:e.dst}),this.init()}update(e){let{vel:t,pressure:s}=e;this.uniforms.velocity.value=t.texture,this.uniforms.pressure.value=s.texture,super.update()}}class ${constructor(e){this.props=e,this.fbos={vel_0:null,vel_1:null,vel_viscous0:null,vel_viscous1:null,div:null,pressure_0:null,pressure_1:null},this.options={iterations_poisson:32,iterations_viscous:32,mouse_force:16,resolution:.5,cursor_size:80,viscous:10,isBounce:!1,dt:.012,isViscous:!1,BFECC:!1},this.fboSize=new B.m,this.cellScale=new B.m,this.boundarySpace=new B.m,this.init()}init(){this.calcSize(),this.createAllFBO(),this.createShaderPass()}createAllFBO(){const e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?B.g:B.f;for(let t in this.fbos)this.fbos[t]=new B.o(this.fboSize.x,this.fboSize.y,{type:e})}createShaderPass(){this.advection=new W({cellScale:this.cellScale,fboSize:this.fboSize,dt:this.options.dt,src:this.fbos.vel_0,dst:this.fbos.vel_1}),this.externalForce=new q({cellScale:this.cellScale,cursor_size:this.options.cursor_size,dst:this.fbos.vel_1}),this.viscous=new J({cellScale:this.cellScale,boundarySpace:this.boundarySpace,viscous:this.options.viscous,src:this.fbos.vel_1,dst:this.fbos.vel_viscous1,dst_:this.fbos.vel_viscous0,dt:this.options.dt}),this.divergence=new K({cellScale:this.cellScale,boundarySpace:this.boundarySpace,src:this.fbos.vel_viscous0,dst:this.fbos.div,dt:this.options.dt}),this.poisson=new X({cellScale:this.cellScale,boundarySpace:this.boundarySpace,src:this.fbos.div,dst:this.fbos.pressure_1,dst_:this.fbos.pressure_0}),this.pressure=new Q({cellScale:this.cellScale,boundarySpace:this.boundarySpace,src_p:this.fbos.pressure_0,src_v:this.fbos.vel_viscous0,dst:this.fbos.vel_0,dt:this.options.dt})}calcSize(){const e=Math.round(this.options.resolution*U.width),t=Math.round(this.options.resolution*U.height),s=1/e,i=1/t;this.cellScale.set(s,i),this.fboSize.set(e,t)}resize(){this.calcSize();for(let e in this.fbos)this.fbos[e].setSize(this.fboSize.x,this.fboSize.y)}update(){this.options.isBounce?this.boundarySpace.set(0,0):this.boundarySpace.copy(this.cellScale),this.advection.update(this.options),this.externalForce.update({cursor_size:this.options.cursor_size,mouse_force:this.options.mouse_force,cellScale:this.cellScale});let e=this.fbos.vel_1;this.options.isViscous&&(e=this.viscous.update({viscous:this.options.viscous,iterations:this.options.iterations_viscous,dt:this.options.dt})),this.divergence.update({vel:e});const t=this.poisson.update({iterations:this.options.iterations_poisson});this.pressure.update({vel:e,pressure:t})}}class Z{constructor(){this.init()}init(){this.simulation=new $,this.scene=new B.l,this.camera=new B.d,this.output=new B.i(new B.j(2,2),new B.k({transparent:!0,vertexShader:Y,fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D velocity;\nuniform vec2 resolution;\nuniform float darkTheme;\nvarying vec2 uv;\n\n// Pi, the ratio of a circle's circumference to its diameter.\nconst float M_PI = 3.14159265358979323846264338327950288;\n// M_PI / 3\nconst float M_PI_3 = 2.0943951024;\n\nconst float margin = 2.0;\n\nfloat sdCircle(in vec2 p, in float r) \n{\n    return length(p) - r;\n}\n\nfloat circle(in vec2 p, in float strength)\n{\n    float baseRadius = 0.01 + pow(strength, 1.5) * 0.15;\n    float minRadius = 0.06; // max(fwidth(length(p)), 0.04);\n    float radius = max(baseRadius, minRadius);\n    float d = sdCircle(p - vec2(0.5, 0.5), radius);\n\t// return (1.0 - smoothstep(-fwidth(d), fwidth(d), d)) * (baseRadius / radius);\n\treturn (1.0 - smoothstep(-0.01, 0.01, d)) * (baseRadius / radius);\n}\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, s, -s, c);\n\treturn m * v;\n}\n\nvoid main(){\n    // fluid data\n    vec2 vel = texture2D(velocity, uv).xy;\n    float len = length(vel);\n\n    // ====================================\n\n    // grid size\n    vec2 n = resolution.xy * 0.025;\n    vec2 uv0 = vec2(fract(uv.x * n.x), fract(uv.y * n.y));\n\n    // grid dots\n    vec2 offset = vel * 0.006 * n;\n    float strength = length(offset) * 10.0;\n\n    vec2 uvGridIndex = ceil(uv * n) / n;\n    uvGridIndex *= step(uvGridIndex, vec2((n-margin)/n));\n    uvGridIndex *= 1.0 - step(uvGridIndex, vec2((margin + 0.1)/n));\n    float marginMask = 1.0 - step(min(uvGridIndex.x, uvGridIndex.y), 0.0);\n    \n    float r = circle(\n        uv0 + offset,\n        strength\n    );\n    float g = circle(\n        uv0 + rotate(offset, M_PI_3),\n        strength\n    );\n    float b = circle(\n        uv0 + rotate(offset, -M_PI_3),\n        strength\n    );\n    vec3 color = sqrt(clamp(vec3(r,g,b), 0.0, 1.0));\n    color = darkTheme == 1.0 ? color + 0.1 : 1.0 - color;\n\n    gl_FragColor = vec4(color, marginMask * clamp(r+g+b, 0.0, 0.5));\n}\n",extensions:{derivatives:!0},uniforms:{velocity:{value:this.simulation.fbos.vel_0.texture},boundarySpace:{value:new B.m},resolution:{value:new B.m(U.width,U.height)},darkTheme:{value:0}}})),this.scene.add(this.output)}addScene(e){this.scene.add(e)}resize(){this.output.material.uniforms.resolution.value.set(U.width,U.height),this.simulation.resize()}render(){U.renderer.setRenderTarget(null),U.renderer.render(this.scene,this.camera)}update(){this.simulation.update(),this.render()}}class ee{constructor(e){this.props=e,U.init(),A.init(),this.init(),this.loop(),window.addEventListener("resize",this.resize.bind(this))}init(){this.props.$wrapper.prepend(U.renderer.domElement),this.output=new Z}resize(){U.resize(),this.output.resize()}render(){A.update(),U.update(),this.output.update()}loop(){this.render(),requestAnimationFrame(this.loop.bind(this))}setDarkTheme(e){void 0!==this.output.output.material&&(this.output.output.material.uniforms.darkTheme.value=e,this.output.output.material.needsUpdate=!0)}}s(87);let te,se;var ie=()=>{const{isDark:e}=x(),t=Object(i.useRef)(),[s,n]=Object(i.useState)(!1);function r(){te=t.current,se=new ee({$wrapper:te})}return Object(i.useEffect)((()=>{s||(r(),n(!0))}),[s,r]),Object(i.useEffect)((()=>{se.setDarkTheme(e?1:0)}),[e]),Object(d.jsx)("div",{className:"FluidSim",ref:t})};var ne=e=>{let{scrollTop:t,setScrollTop:s,...n}=e;Object(i.useEffect)((()=>{window.scrollTo(0,t)}));return Object(d.jsxs)(O.a.div,{className:"Page",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationComplete:e=>{if(0===e.opacity){const e=document.documentElement.scrollTop||document.body.scrollTop;s(e)}},transition:{duration:.2},children:[Object(d.jsx)(ie,{}),Object(d.jsx)(R,{}),Object(d.jsx)(G,{})]})};l.a.init("phc_Ud6pwqtRXUUeeC5zAjDoPZ7MYE41EdRWPMY2gdni1Yt",{api_host:"https://app.posthog.com"});var re=()=>{const e=Object(a.f)();window.history.scrollRestoration&&(window.history.scrollRestoration="manual");const[t,s]=Object(i.useState)(0),n=E.map((e=>Object(d.jsx)(a.a,{path:"/projects/".concat(e.slug),children:Object(d.jsx)(e.component,{})},e.slug)));return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{}),Object(d.jsx)(y,{}),Object(d.jsx)(c.a,{exitBeforeEnter:!0,children:Object(d.jsxs)(a.c,{location:e,children:[Object(d.jsx)(a.a,{exact:!0,path:"/",children:Object(d.jsx)(ne,{scrollTop:t,setScrollTop:s})}),n]},e.pathname)})]})};var oe=e=>{e&&e instanceof Function&&s.e(16).then(s.bind(null,105)).then((t=>{let{getCLS:s,getFID:i,getFCP:n,getLCP:r,getTTFB:o}=t;s(e),i(e),n(e),r(e),o(e)}))};o.a.render(Object(d.jsx)(h.a,{basename:"",children:Object(d.jsx)(re,{})}),document.getElementById("root")),oe()}},[[88,14,15]]]);
//# sourceMappingURL=main.1af1455c.chunk.js.map